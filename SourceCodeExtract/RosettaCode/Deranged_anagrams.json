{"isSuccess":true,"url":"http://rosettacode.org//wiki/Anagrams/Deranged_anagrams","codeArray":["#!/usr/bin/env js\n\nfunction main() {\n    var wordList = read('unixdict.txt').split(/\\s+/);\n    var anagrams = findAnagrams(wordList);\n    var derangedAnagrams = findDerangedAnagrams(anagrams);\n    var longestPair = findLongestDerangedPair(derangedAnagrams);\n    print(longestPair.join(' '));\n}\n\nfunction findLongestDerangedPair(danas) {\n    var longestLen = danas[0][0].length;\n    var longestPair = danas[0];\n    for (var i in danas) {\n        if (danas[i][0].length > longestLen) {\n            longestLen = danas[i][0].length;\n            longestPair = danas[i];\n        }\n    }\n    return longestPair;\n}\n\nfunction findDerangedAnagrams(anagrams) {\n    var deranged = [];\n\n    function isDeranged(w1, w2) {\n        for (var c = 0; c < w1.length; c++) {\n            if (w1[c] == w2[c]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    function findDeranged(anas) {\n        for (var a = 0; a < anas.length; a++) {\n            for (var b = a + 1; b < anas.length; b++) {\n                if (isDeranged(anas[a], anas[b])) {\n                    deranged.push([anas[a], anas[b]]);\n                }\n            }\n        }\n    }\n    for (var a in anagrams) {\n        var anas = anagrams[a];\n        findDeranged(anas);\n    }\n    return deranged;\n}\n\nfunction findAnagrams(wordList) {\n    var anagrams = {};\n    for (var wordNum in wordList) {\n        var word = wordList[wordNum];\n        var key = word.split('').sort().join('');\n        if (!(key in anagrams)) {\n            anagrams[key] = [];\n        }\n        anagrams[key].push(word);\n    }\n    for (var a in anagrams) {\n        if (anagrams[a].length < 2) {\n            delete(anagrams[a]);\n        }\n    }\n    return anagrams;\n}\nmain();","function show(t) {\n    var l = document.createTextNode(t + '\\n');\n    document.getElementById('x').appendChild(l);\n}\n// get words; be ware of cross-site restrictions on XMLHttpRequest\nvar words = null;\nvar req = new XMLHttpRequest();\nreq.open('GET', 'file:///tmp/unixdict.txt', false);\nreq.send(null);\nwords = req.responseText.split('\\n');\nvar idx = {};\nfor (var i = 0; i < words.length; i++) {\n    var t = words[i].split('').sort().join('');\n    if (idx[t]) idx[t].push(words[i]);\n    else idx[t] = [words[i]];\n}\nvar best = '';\nvar best_pair;\nfor (var i in idx) {\n    if (i.length <= best.length) continue;\n    if (idx[i].length == 1) continue;\n    var a = idx[i],\n        got = null;\n    for (var j = 0, l1 = a[j]; j < a.length && !got; j++) {\n        for (var k = j + 1, l2 = a[k]; k < a.length && !got; k++)\n            for (var m = 0; m < l1.length || !(got = [l2]); m++)\n                if (l1[m] == l2[m]) break;\n        if (got) got.push(l1);\n    }\n    if (got) {\n        best_pair = got;\n        best = got[0];\n    }\n}\nshow(best_pair);"],"uncertainCodeArray":[],"textArray":[]}