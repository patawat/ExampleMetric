{"isSuccess":true,"url":"http://rosettacode.org//wiki/Parallel_calculations","codeArray":[" var onmessage = function(event) {   \n      postMessage({\"n\" : event.data.n,\n                   \"factors\" : factor(event.data.n),\n                   \"id\" : event.data.id});\n  };\n  function factor(n) {\n      var factors = [];\n      for(p = 2; p <= n; p++) {\n          if((n % p) == 0) {\n              factors[factors.length] = p;\n              n /= p;\n          }\n      }\n      return factors;\n  }\n  var numbers = [12757923, 12878611, 12757923, 15808973, 15780709, 197622519];\n  var workers = [];\n  var worker_count = 0;\n  var results = [];\n  for(var i = 0; i < numbers.length; i++) {\n      worker_count++;\n      workers[i] = new Worker(\"parallel_worker.js\");\n      workers[i].onmessage = accumulate;\n      workers[i].postMessage({n: numbers[i], id: i});\n  }\n  function accumulate(event) {\n      n = event.data.n;\n      factors = event.data.factors;\n      id = event.data.id;\n      console.log(n + \" : \" + factors);\n      results[id] = {n:n, factors:factors};\n      // Cleanup - kill the worker and countdown until all work is done\n      workers[id].terminate();\n      worker_count--;\n      if(worker_count == 0)\n  \treduce();\n  }\n  function reduce() {\n      answer = 0;\n      for(i = 1; i < results.length; i++) {\n  \tmin = results[i].factors[0];\n  \tlargest_min = results[answer].factors[0];\n  \tif(min > largest_min)\n  \t    answer = i;\n      }\n      n = results[answer].n;\n      factors = results[answer].factors;\n      console.log(\"The number with the relatively largest factors is: \" + n + \" : \" + factors);\n  }"],"uncertainCodeArray":[],"textArray":[]}