{"isSuccess":true,"url":"http://rosettacode.org//wiki/Stable_marriage_problem","codeArray":["function Person(name) {\n    var candidateIndex = 0;\n    this.name = name;\n    this.fiance = null;\n    this.candidates = [];\n    this.rank = function(p) {\n        for (i = 0; i < this.candidates.length; i++)\n            if (this.candidates[i] === p) return i;\n        return this.candidates.length + 1;\n    }\n    this.prefers = function(p) {\n        return this.rank(p) < this.rank(this.fiance);\n    }\n    this.nextCandidate = function() {\n        if (candidateIndex >= this.candidates.length) return null;\n        return this.candidates[candidateIndex++];\n    }\n    this.engageTo = function(p) {\n        if (p.fiance) p.fiance.fiance = null;\n        p.fiance = this;\n        if (this.fiance) this.fiance.fiance = null;\n        this.fiance = p;\n    }\n    this.swapWith = function(p) {\n        console.log(\"%s & %s swap partners\", this.name, p.name);\n        var thisFiance = this.fiance;\n        var pFiance = p.fiance;\n        this.engageTo(pFiance);\n        p.engageTo(thisFiance);\n    }\n}\n\nfunction isStable(guys, gals) {\n    for (var i = 0; i < guys.length; i++)\n        for (var j = 0; j < gals.length; j++)\n            if (guys[i].prefers(gals[j]) && gals[j].prefers(guys[i]))\n                return false;\n    return true;\n}\n\nfunction engageEveryone(guys) {\n    var done;\n    do {\n        done = true;\n        for (var i = 0; i < guys.length; i++) {\n            var guy = guys[i];\n            if (!guy.fiance) {\n                done = false;\n                var gal = guy.nextCandidate();\n                if (!gal.fiance || gal.prefers(guy))\n                    guy.engageTo(gal);\n            }\n        }\n    } while (!done);\n}\n\nfunction doMarriage() {\n    var abe = new Person(\"Abe\");\n    var bob = new Person(\"Bob\");\n    var col = new Person(\"Col\");\n    var dan = new Person(\"Dan\");\n    var ed = new Person(\"Ed\");\n    var fred = new Person(\"Fred\");\n    var gav = new Person(\"Gav\");\n    var hal = new Person(\"Hal\");\n    var ian = new Person(\"Ian\");\n    var jon = new Person(\"Jon\");\n    var abi = new Person(\"Abi\");\n    var bea = new Person(\"Bea\");\n    var cath = new Person(\"Cath\");\n    var dee = new Person(\"Dee\");\n    var eve = new Person(\"Eve\");\n    var fay = new Person(\"Fay\");\n    var gay = new Person(\"Gay\");\n    var hope = new Person(\"Hope\");\n    var ivy = new Person(\"Ivy\");\n    var jan = new Person(\"Jan\");\n    abe.candidates = [abi, eve, cath, ivy, jan, dee, fay, bea, hope, gay];\n    bob.candidates = [cath, hope, abi, dee, eve, fay, bea, jan, ivy, gay];\n    col.candidates = [hope, eve, abi, dee, bea, fay, ivy, gay, cath, jan];\n    dan.candidates = [ivy, fay, dee, gay, hope, eve, jan, bea, cath, abi];\n    ed.candidates = [jan, dee, bea, cath, fay, eve, abi, ivy, hope, gay];\n    fred.candidates = [bea, abi, dee, gay, eve, ivy, cath, jan, hope, fay];\n    gav.candidates = [gay, eve, ivy, bea, cath, abi, dee, hope, jan, fay];\n    hal.candidates = [abi, eve, hope, fay, ivy, cath, jan, bea, gay, dee];\n    ian.candidates = [hope, cath, dee, gay, bea, abi, fay, ivy, jan, eve];\n    jon.candidates = [abi, fay, jan, gay, eve, bea, dee, cath, ivy, hope];\n    abi.candidates = [bob, fred, jon, gav, ian, abe, dan, ed, col, hal];\n    bea.candidates = [bob, abe, col, fred, gav, dan, ian, ed, jon, hal];\n    cath.candidates = [fred, bob, ed, gav, hal, col, ian, abe, dan, jon];\n    dee.candidates = [fred, jon, col, abe, ian, hal, gav, dan, bob, ed];\n    eve.candidates = [jon, hal, fred, dan, abe, gav, col, ed, ian, bob];\n    fay.candidates = [bob, abe, ed, ian, jon, dan, fred, gav, col, hal];\n    gay.candidates = [jon, gav, hal, fred, bob, abe, col, ed, dan, ian];\n    hope.candidates = [gav, jon, bob, abe, ian, dan, hal, ed, col, fred];\n    ivy.candidates = [ian, col, hal, gav, fred, bob, abe, ed, jon, dan];\n    jan.candidates = [ed, hal, gav, abe, bob, jon, col, ian, fred, dan];\n    var guys = [abe, bob, col, dan, ed, fred, gav, hal, ian, jon];\n    var gals = [abi, bea, cath, dee, eve, fay, gay, hope, ivy, jan];\n    engageEveryone(guys);\n    for (var i = 0; i < guys.length; i++) {\n        console.log(\"%s is engaged to %s\", guys[i].name, guys[i].fiance.name);\n    }\n    console.log(\"Stable = %s\", isStable(guys, gals) ? \"Yes\" : \"No\");\n    jon.swapWith(fred);\n    console.log(\"Stable = %s\", isStable(guys, gals) ? \"Yes\" : \"No\");\n}\ndoMarriage();"],"uncertainCodeArray":[],"textArray":[]}