{"isSuccess":true,"url":"http://rosettacode.org//wiki/Grayscale_image","codeArray":["window.addEventListener(\n    \"load\",\n    function() {\n        var img = new Image();\n        // ***********************************************************\n        // RUN LOCAL WEBSERVER TO LOAD LOCAL FILES: e.g. python -m http.server (python3) \n        // ***********************************************************\n        // img.src = prompt(\"enter image path\",\"http://localhost:8000/test.jpg\");\n        img.src =\n            'data:image/gif;base64,R0lGODlhEAAOALMAAOazToeHh0tLS/7LZv/0jvb29t/f3//Ub/\\\n              /ge8WSLf/rhf/3kdbW1mxsbP//mf///yH5BAAAAAAALAAAAAAQAA4AAARe8L1Ekyky67QZ1hLnjM5UUde0ECwLJoExKcpp\\\n              V0aCcGCmTIHEIUEqjgaORCMxIC6e0CcguWw6aFjsVMkkIr7g77ZKPJjPZqIyd7sJAgVGoEGv2xsBxqNgYPj/gAwXEQA7';\n        img.onload = function() {\n            var can1 = new CustomCanvas(\"color\", img.width, img.height);\n            var can2 = new CustomCanvas(\"grayscale\", img.width, img.height);\n            can1.ctx.drawImage(img, 0, 0, img.width, img.height);\n            var imgData = can1.ctx.getImageData(0, 0, can1.w, can1.h);\n            // desaturate\n            var avg;\n            var max;\n            var rwgt = 0.2126;\n            var gwgt = 0.7152;\n            var bwgt = 0.0722;\n            for (var i = 0, max = can1.w * can1.h * 4; i < max; i = i + 4) {\n                avg = imgData.data[i] * rwgt + imgData.data[i + 1] * gwgt + imgData.data[i + 2] * bwgt;\n                imgData.data[i] = avg; // red\n                imgData.data[i + 1] = avg; // green\n                imgData.data[i + 2] = avg;\n            } // blue, alpha=alpha\n            can2.ctx.putImageData(imgData, 0, 0);\n        }\n    }, false);\n\nfunction CustomCanvas(id, w, h, s) { /* Custom Canvas Object */\n    var c = document.createElement(\"canvas\");\n    c.setAttribute('id', id);\n    c.setAttribute('width', w);\n    c.setAttribute('height', h);\n    (s) ? c.setAttribute('style', s): 0;\n    document.body.appendChild(c, document.body.firstChild);\n    this.ctx = document.getElementById(id).getContext(\"2d\");\n    this.w = w;\n    this.h = h;\n}"],"uncertainCodeArray":[],"textArray":[]}