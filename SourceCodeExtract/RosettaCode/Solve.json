{"isSuccess":true,"url":"http://rosettacode.org//wiki/24_game/Solve","codeArray":["var ar = [],\n    order = [0, 1, 2],\n    op = [],\n    val = [];\nvar NOVAL = 9999,\n    oper = \"+-*/\",\n    out;\n\nfunction rnd(n) {\n    return Math.floor(Math.random() * n)\n}\n\nfunction say(s) {\n    try {\n        document.write(s + \"<br>\")\n    } catch (e) {\n        WScript.Echo(s)\n    }\n}\n\nfunction getvalue(x, dir) {\n    var r = NOVAL;\n    if (dir > 0) ++x;\n    while (1) {\n        if (val[x] != NOVAL) {\n            r = val[x];\n            val[x] = NOVAL;\n            break;\n        }\n        x += dir;\n    }\n    return r * 1;\n}\n\nfunction calc() {\n    var c = 0,\n        l, r, x;\n    val = ar.join('/').split('/');\n    while (c < 3) {\n        x = order[c];\n        l = getvalue(x, -1);\n        r = getvalue(x, 1);\n        switch (op[x]) {\n            case 0:\n                val[x] = l + r;\n                break;\n            case 1:\n                val[x] = l - r;\n                break;\n            case 2:\n                val[x] = l * r;\n                break;\n            case 3:\n                if (!r || l % r) return 0;\n                val[x] = l / r;\n        }\n        ++c;\n    }\n    return getvalue(-1, 1);\n}\n\nfunction shuffle(s, n) {\n    var x = n,\n        p = eval(s),\n        r, t;\n    while (x--) {\n        r = rnd(n);\n        t = p[x];\n        p[x] = p[r];\n        p[r] = t;\n    }\n}\n\nfunction parenth(n) {\n    while (n > 0) --n, out += '(';\n    while (n < 0) ++n, out += ')';\n}\n\nfunction getpriority(x) {\n    for (var z = 3; z--;)\n        if (order[z] == x) return 3 - z;\n    return 0;\n}\n\nfunction showsolution() {\n    var x = 0,\n        p = 0,\n        lp = 0,\n        v = 0;\n    while (x < 4) {\n        if (x < 3) {\n            lp = p;\n            p = getpriority(x);\n            v = p - lp;\n            if (v > 0) parenth(v);\n        }\n        out += ar[x];\n        if (x < 3) {\n            if (v < 0) parenth(v);\n            out += oper.charAt(op[x]);\n        }\n        ++x;\n    }\n    parenth(-p);\n    say(out);\n}\n\nfunction solve24(s) {\n    var z = 4,\n        r;\n    while (z--) ar[z] = s.charCodeAt(z) - 48;\n    out = \"\";\n    for (z = 100000; z--;) {\n        r = rnd(256);\n        op[0] = r & 3;\n        op[1] = (r >> 2) & 3;\n        op[2] = (r >> 4) & 3;\n        shuffle(\"ar\", 4);\n        shuffle(\"order\", 3);\n        if (calc() != 24) continue;\n        showsolution();\n        break;\n    }\n}\nsolve24(\"1234\");\nsolve24(\"6789\");\nsolve24(\"1127\");"],"uncertainCodeArray":[],"textArray":[]}