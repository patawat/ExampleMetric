{"isSuccess":true,"url":"http://rosettacode.org//wiki/Percentage_difference_between_images","codeArray":["function getImageData(url, callback) {\n    var img = document.createElement('img');\n    var canvas = document.createElement('canvas');\n    img.onload = function() {\n        canvas.width = img.width;\n        canvas.height = img.height;\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0);\n        callback(ctx.getImageData(0, 0, img.width, img.height));\n    };\n    img.src = url;\n}\n\nfunction compare(firstImage, secondImage, callback) {\n    getImageData(firstImage, function(img1) {\n        getImageData(secondImage, function(img2) {\n            if (img1.width !== img2.width || img1.height != img2.height) {\n                callback(NaN);\n                return;\n            }\n            var diff = 0;\n            for (var i = 0; i < img1.data.length / 4; i++) {\n                diff += Math.abs(img1.data[4 * i + 0] - img2.data[4 * i + 0]) / 255;\n                diff += Math.abs(img1.data[4 * i + 1] - img2.data[4 * i + 1]) / 255;\n                diff += Math.abs(img1.data[4 * i + 2] - img2.data[4 * i + 2]) / 255;\n            }\n            callback(100 * diff / (img1.width * img1.height * 3));\n        });\n    });\n}\ncompare('Lenna50.jpg', 'Lenna100.jpg', function(result) {\n    console.log(result);\n});"],"uncertainCodeArray":[],"textArray":[]}