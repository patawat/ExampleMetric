{"isSuccess":true,"url":"http://rosettacode.org//wiki/Percentage_difference_between_images","codeArray":["function getImageData(url, callback) {\n  \tvar img = document.createElement('img');\n  \tvar canvas = document.createElement('canvas');\n  \timg.onload = function () {\n  \t\tcanvas.width = img.width;\n  \t\tcanvas.height = img.height;\n  \t\tvar ctx = canvas.getContext('2d');\n  \t\tctx.drawImage(img, 0, 0);\n  \t\tcallback(ctx.getImageData(0, 0, img.width, img.height));\n  \t};\n  \timg.src = url;\n  }\n  function compare(firstImage, secondImage, callback) {\n  \tgetImageData(firstImage, function (img1) {\n  \t\tgetImageData(secondImage, function (img2) {\n  \t\t\tif (img1.width !== img2.width || img1.height != img2.height) {\n  \t\t\t\tcallback(NaN);\n  \t\t\t\treturn;\n  \t\t\t}\n  \t\t\tvar diff = 0;\n  \t\t\tfor (var i = 0; i < img1.data.length / 4; i++) {\n  \t\t\t\tdiff += Math.abs(img1.data[4 * i + 0] - img2.data[4 * i + 0]) / 255;\n  \t\t\t\tdiff += Math.abs(img1.data[4 * i + 1] - img2.data[4 * i + 1]) / 255;\n  \t\t\t\tdiff += Math.abs(img1.data[4 * i + 2] - img2.data[4 * i + 2]) / 255;\n  \t\t\t}\n  \t\t\tcallback(100 * diff / (img1.width * img1.height * 3));\n  \t\t});\n  \t});\n  }\n  compare('Lenna50.jpg', 'Lenna100.jpg', function (result) {\n  \tconsole.log(result);\n  });"],"uncertainCodeArray":[],"textArray":[]}