{"isSuccess":true,"url":"http://rosettacode.org//wiki/Top_rank_per_group","codeArray":["var data = [\n      {name: \"Tyler Bennett\",   id: \"E10297\", salary: 32000, dept: \"D101\"},\n      {name: \"John Rappl\",      id: \"E21437\", salary: 47000, dept: \"D050\"},\n      {name: \"George Woltman\",  id: \"E00127\", salary: 53500, dept: \"D101\"},\n      {name: \"Adam Smith\",      id: \"E63535\", salary: 18000, dept: \"D202\"},\n      {name: \"Claire Buckman\",  id: \"E39876\", salary: 27800, dept: \"D202\"},\n      {name: \"David McClellan\", id: \"E04242\", salary: 41500, dept: \"D101\"},\n      {name: \"Rich Holcomb\",    id: \"E01234\", salary: 49500, dept: \"D202\"},\n      {name: \"Nathan Adams\",    id: \"E41298\", salary: 21900, dept: \"D050\"},\n      {name: \"Richard Potter\",  id: \"E43128\", salary: 15900, dept: \"D101\"},\n      {name: \"David Motsinger\", id: \"E27002\", salary: 19250, dept: \"D202\"},\n      {name: \"Tim Sampair\",     id: \"E03033\", salary: 27000, dept: \"D101\"},\n      {name: \"Kim Arlich\",      id: \"E10001\", salary: 57000, dept: \"D190\"},\n      {name: \"Timothy Grove\",   id: \"E16398\", salary: 29900, dept: \"D190\"},\n  ];\n  function top_rank(n) {\n      var by_dept = group_by_dept(data);\n      for (var dept in by_dept) {\n          output(dept);\n          for (var i = 0; i < n && i < by_dept[dept].length; i++) {\n              var emp = by_dept[dept][i];\n              output(emp.name + \", id=\" + emp.id + \", salary=\" + emp.salary);\n          }\n          output(\"\");\n      }\n  }\n  // group by dept, and sort by salary\n  function group_by_dept(data) {\n      var by_dept = {};\n      for (var idx in data)  {\n          var dept = data[idx].dept;\n          if ( ! has_property(by_dept, dept)) {\n              by_dept[dept] = new Array();\n          }\n          by_dept[dept].push(data[idx]);\n      }\n      for (var dept in by_dept) {\n          // numeric sort\n          by_dept[dept].sort(function (a,b){return b.salary - a.salary});\n      }\n      return by_dept;\n  }\n  function has_property(obj, propname) {\n      return typeof(obj[propname]) != \"undefined\";\n  }\n  function output(str) {\n      try {\n          WScript.Echo(str);  // WSH\n      } catch(err) {\n          print(str);  // Rhino\n      }\n  }\n  top_rank(3);\n  var collectDept = function (arrOfObj) {\n    var collect = arrOfObj.reduce(function (rtnObj, obj) {\n      if (rtnObj[obj.dept] === undefined) {\n        rtnObj[obj.dept] = [];\n      }\n      rtnObj[obj.dept].push(obj);\n      return rtnObj;\n    }, {});\n    return Object.keys(collect).map(function (key) {\n      return collect[key];\n    });\n  };\n  var sortSalary = function (arrOfSalaryArrs) {\n    return arrOfSalaryArrs.map(function (item) {\n      return item.sort(function (a, b) {\n        if (a.salary > b.salary) { return -1; }\n        if (a.salary < b.salary) { return 1; }\n        return 0;\n      });\n    });\n  };\n  var getNTopSalariesByDept = function (n, data) {\n    if (n < 0) { return; }\n    return sortSalary(collectDept(data)).map(function (list) {\n      return list.slice(0,n);\n    });\n  };"],"uncertainCodeArray":[],"textArray":[]}