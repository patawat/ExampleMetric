{"isSuccess":true,"url":"http://rosettacode.org//wiki/Particle_Swarm_Optimization","codeArray":["function pso_init(y) {\n    var nDims= y.min.length;\n    var pos=[], vel=[], bpos=[], bval=[];\n    for (var j= 0; j<y.nParticles; j++) {\n      pos[j]= bpos[j]= y.min;\n      var v= []; for (var k= 0; k<nDims; k++) v[k]= 0;\n      vel[j]= v;\n      bval[j]= Infinity}\n    return {\n  \titer: 0,\n  \tgbpos: Infinity,\n  \tgbval: Infinity,\n  \tmin: y.min,\n  \tmax: y.max,\n  \tparameters: y.parameters,\n  \tpos: pos,\n  \tvel: vel,\n  \tbpos: bpos,\n  \tbval: bval,\n          nParticles: y.nParticles,\n          nDims: nDims}\n  }\n  function pso(fn, state) {\n    var y= state;\n    var p= y.parameters;\n    var val=[], bpos=[], bval=[], gbval= Infinity, gbpos=[];\n    for (var j= 0; j<y.nParticles; j++) {\n      // evaluate\n      val[j]= fn.apply(null, y.pos[j]);\n      // update\n      if (val[j] < y.bval[j]) {\n        bpos[j]= y.pos[j];\n        bval[j]= val[j];\n      } else {\n        bpos[j]= y.bpos[j];\n        bval[j]= y.bval[j]}\n      if (bval[j] < gbval) {\n        gbval= bval[j];\n        gbpos= bpos[j]}}\n    var rg= Math.random(), vel=[], pos=[];\n    for (var j= 0; j<y.nParticles; j++) {\n      // migrate\n      var rp= Math.random(), ok= true;\n      vel[j]= [];\n      pos[j]= [];\n      for (var k= 0; k < y.nDims; k++) {\n        vel[j][k]= p.omega*y.vel[j][k] + p.phip*rp*(bpos[j]-y.pos[j]) + p.phig*rg*(gbpos-y.pos[j]);\n        pos[j][k]= y.pos[j]+vel[j][k];\n        ok= ok && y.min[k]<pos[j][k] && y.max>pos[j][k];}\n      if (!ok)\n        for (var k= 0; k < y.nDims; k++)\n          pos[j][k]= y.min[k] + (y.max[k]-y.min[k])*Math.random()}\n    return {\n  \titer: 1+y.iter,\n  \tgbpos: gbpos,\n  \tgbval: gbval,\n  \tmin: y.min,\n  \tmax: y.max,\n  \tparameters: y.parameters,\n  \tpos: pos,\n  \tvel: vel,\n  \tbpos: bpos,\n  \tbval: bval,\n          nParticles: y.nParticles,\n          nDims: y.nDims}\n  }\n  function display(text) {\n    if (document) {\n      var o= document.getElementById('o');\n      if (!o) {\n        o= document.createElement('pre');\n        o.id= 'o';\n        document.body.appendChild(o)}\n      o.innerHTML+= text+'\\n';\n      window.scrollTo(0,document.body.scrollHeight);\n    }\n    if (console.log) console.log(text)\n  }\n  function reportState(state) {\n    var y= state;\n    display('');\n    display('Iteration: '+y.iter);\n    display('GlobalBestPosition: '+y.gbpos);\n    display('GlobalBestValue: '+y.gbval);\n  }\n  function repeat(fn, n, y) {\n    var r=y, old= y;\n    if (Infinity == n)\n      while ((r= fn(r)) != old) old= r;\n    else\n      for (var j= 0; j<n; j++) r= fn(r);\n    return r\n  }\n  function mccormick(a,b) {\n    return Math.sin(a+b) + Math.pow(a-b,2) + (1 + 2.5*b - 1.5*a)\n  }\n  state= pso_init({\n    min: [-1.5,-3], max:[4,4],\n    parameters: {omega: 0, phip: 0.6, phig: 0.3},\n    nParticles: 100});\n  reportState(state);\n  state= repeat(function(y){return pso(mccormick,y)}, 40, state);\n  reportState(state);Â \n  Iteration: 0\n  GlobalBestPosition: Infinity\n  GlobalBestValue: Infinity\n  Iteration: 40\n  GlobalBestPosition: -0.5134004259016365,-1.5512442672625184\n  GlobalBestValue: -1.9114053788600853"],"uncertainCodeArray":[],"textArray":[]}