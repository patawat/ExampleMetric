{"isSuccess":true,"url":"http://rosettacode.org//wiki/Draw_a_sphere","codeArray":["var light = [30, 30, -50],\n    gR, gk, gambient;\n\nfunction normalize(v) {\n    var len = Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\n    v[0] /= len;\n    v[1] /= len;\n    v[2] /= len;\n    return v;\n}\n\nfunction dot(x, y) {\n    var d = x[0] * y[0] + x[1] * y[1] + x[2] * y[2];\n    return d < 0 ? -d : 0;\n}\n\nfunction draw_sphere(R, k, ambient) {\n    var i, j, intensity, b, vec, x, y, cvs, ctx, imgdata, idx;\n    cvs = document.getElementById(\"c\");\n    ctx = cvs.getContext(\"2d\");\n    cvs.width = cvs.height = 2 * Math.ceil(R) + 1;\n    imgdata = ctx.createImageData(2 * Math.ceil(R) + 1, 2 * Math.ceil(R) + 1);\n    idx = 0;\n    for (i = Math.floor(-R); i <= Math.ceil(R); i++) {\n        x = i + .5;\n        for (j = Math.floor(-R); j <= Math.ceil(R); j++) {\n            y = j + .5;\n            if (x * x + y * y <= R * R) {\n                vec = [x, y, Math.sqrt(R * R - x * x - y * y)];\n                vec = normalize(vec);\n                b = Math.pow(dot(light, vec), k) + ambient;\n                intensity = (1 - b) * 256;\n                if (intensity < 0) intensity = 0;\n                if (intensity >= 256) intensity = 255;\n                imgdata.data[idx++] = imgdata.data[idx++] = 255 - ~~(intensity); //RG\n                imgdata.data[idx++] = imgdata.data[idx++] = 255; //BA\n            } else {\n                imgdata.data[idx++] = imgdata.data[idx++] = imgdata.data[idx++] = imgdata.data[idx++] = 255; //RGBA\n            }\n        }\n    }\n    ctx.putImageData(imgdata, 0, 0);\n}\nlight = normalize(light);"],"uncertainCodeArray":[],"textArray":[]}