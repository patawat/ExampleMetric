{"isSuccess":true,"url":"http://rosettacode.org//wiki/Deal_cards_for_FreeCell","codeArray":["\"use strict\";\n  /*\n   * Microsoft C Run-time-Library-compatible Random Number Generator\n   * Copyright by Shlomi Fish, 2011.\n   * Released under the MIT/X11 License\n   * ( http://en.wikipedia.org/wiki/MIT_License ).\n   * */\n  /* This uses Joose 2.x-or-above, an object system for JavaScript - http://code.google.com/p/joose-js/ . */\n  Class('MSRand', {\n      has: {\n          seed: { is: rw, },\n      },\n      methods: {\n          rand: function() {\n              this.setSeed((this.getSeed() * 214013 + 2531011) & 0x7FFFFFFF);\n              return ((this.getSeed() >> 16) & 0x7fff);\n          },\n          max_rand: function(mymax) {\n              return this.rand() % mymax;\n          },\n          shuffle: function(deck) {\n              if (deck.length) {\n                  var i = deck.length;\n                  while (--i) {\n                      var j = this.max_rand(i+1);\n                      var tmp = deck[i];\n                      deck[i] = deck[j];\n                      deck[j] = tmp;\n                  }\n              }\n              return deck;\n          },\n      },\n  });\n  /*\n   * Microsoft Windows Freecell / Freecell Pro boards generation.\n   *\n   * See:\n   *\n   * - http://rosettacode.org/wiki/Deal_cards_for_FreeCell\n   *\n   * - http://www.solitairelaboratory.com/mshuffle.txt\n   *\n   * Under MIT/X11 Licence.\n   *\n   * */\n  function deal_ms_fc_board(seed) {\n      var randomizer = new MSRand({ seed: seed });\n      var num_cols = 8;\n      var _perl_range = function(start, end) {\n          var ret = [];\n          for (var i = start; i <= end; i++) {\n              ret.push(i);\n          }\n          return ret;\n      };\n      var columns = _perl_range(0, num_cols-1).map(function () { return []; });\n      var deck = _perl_range(0, 4*13-1);\n      randomizer.shuffle(deck);\n      deck = deck.reverse()\n      for (var i = 0; i < 52; i++) {\n          columns[i % num_cols].push(deck[i]);\n      }\n      var render_card = function (card) {\n          var suit = (card % 4);\n          var rank = Math.floor(card / 4);\n          return \"A23456789TJQK\".charAt(rank) + \"CDHS\".charAt(suit);\n      }\n      var render_column = function(col) {\n          return \": \" + col.map(render_card).join(\" \") + \"\\n\";\n      }\n      return columns.map(render_column).join(\"\");\n  }"],"uncertainCodeArray":[],"textArray":[]}